# E-CRP DB Frame 기능명세서

## 1. 개요

### 1.1 시스템 목적
CRP(Contra-Rotating Propeller) 계열화 데이터 관리를 위한 데이터베이스 관리 시스템 구축

### 1.2 주요 목표
- CRP 계열화 데이터 관리를 위한 데이터베이스 관리 도구 선정
- CRP 운용조건, 해석방법(포텐셜, CFD), 해석조건 등에 따른 분류 항목 선정
- DB 분류 항목별 가시성 확보를 위한 화면 구축

---

## 2. 기능 요구사항

### 2.1 프로펠러 설계 및 모델링 DB 관리

#### 2.1.1 유저 직접입력 항목

| 항목명 | 데이터 타입 | 예시 | 설명 |
|--------|-----------|------|------|
| 프로펠러 이름 | String | KP1711 | 프로펠러 식별자 |
| 날개수 | Value (Integer) | 4 | 프로펠러 날개 개수 |
| 사용단면 | String | NACA 66 mod | 프로펠러 단면 형상 |
| 사용단면 파일 유무 | String | O, X | 단면 파일 존재 여부 |
| 회전방향 | String | Right, Left | 프로펠러 회전 방향 |
| Power Ratio | String | 5:5, 4:6 | 전후 프로펠러 출력 비율 |
| 스케일 비율 | Value (Float) | 42.063 | 모델 스케일 비율 |
| Offset 파일 유무 | String | O, X | Offset 파일 존재 여부 |

#### 2.1.2 파일 업로드 항목 (총 7개)

| 파일 종류 | 확장자 | 호환 형식 | 설명 |
|----------|--------|----------|------|
| Offset 파일 | .dat | .txt 호환 | 프로펠러 오프셋 데이터 |
| 사용단면 파일 | .blk | .txt 호환 | 단면 형상 데이터 |
| 형상 사진 | .jpg | - | Top, Front, Side 뷰 이미지 |
| 제작도면 파일 | .jpg | - | 프로펠러 제작 도면 |
| Propeller Geometry Data | .out | .txt 호환 | 프로펠러 형상 데이터 |
| 형상 정보 파일 | .csv | - | 형상 정보 스프레드시트 |
| 형상 파일 | .igs, .stl, .stp | - | 3D CAD 형상 파일 |

---

### 2.2 성능해석 DB 관리

#### 2.2.1 유저 직접입력 항목 - Input

| 항목명 | 데이터 타입 | 예시 | 계산식/설명 |
|--------|-----------|------|------------|
| Density | Value (Float) | 998.05 | 유체 밀도 |
| Viscosity | Value (Float) | 0.00015 | 동점성 계수 |
| After RPS | Value (Float) | 15 | 후방 프로펠러 회전수 |
| Forward RPS | Value (Float) | 20 | 전방 프로펠러 회전수 |
| RPS Ratio | Value (Float) | 0.75 | After RPS / Forward RPS |
| Reynolds Number | Value (Float) | 0.000011 | Density × Velocity × Diameter / Viscosity |
| J (Advance Coefficient) | Value (Float) | 0.2 | 전진계수 |
| Velocity | Value (Float) | 0.062 | J × Forward RPS × Forward Diameter |

#### 2.2.2 유저 직접입력 항목 - Output

| 항목명 | 데이터 타입 | 예시 | 설명 |
|--------|-----------|------|------|
| Thrust | Value (Float) | 120.12 | 추력 |
| Torque | Value (Float) | 6.83 | 토크 |
| KT | Value (Float) | 0.9275 | 추력 계수 |
| 10KQ | Value (Float) | 1.7802 | 토크 계수 (×10) |
| ηO | Value (Float) | 0.1659 | 프로펠러 효율 |
| Method | String | Lag K-e, K-w | 해석 방법 (RANS/URANS/LES) |

#### 2.2.3 파일 업로드 항목 (총 4개)

| 파일 종류 | 확장자 | 설명 |
|----------|--------|------|
| 해석결과 (Pressure) | .png | 압력 분포 시각화 이미지 |
| 해석결과 (Wake) | .png | 유동장(Wake) 시각화 이미지 |
| 해석결과 (Graph) | .png | 성능 그래프 이미지 (Turbulent Graph, Force Graph 등) |

---

## 3. 화면 구성 요구사항

### 3.1 메인 화면 구성요소

1. **SQL 프로그래밍 (DB 논리모델)**: 데이터베이스 구조 관리
2. **DB Case Table**: 프로펠러 케이스별 데이터 테이블 뷰
3. **CFD DB Record**: CFD 해석 결과 기록 관리
4. **CFD DB Analytics**: CFD 데이터 분석 및 시각화

### 3.2 시각화 요소

- Blade Mesh 시각화
- Pressure 분포 시각화 (J 값별)
- Turbulent Graph
- Rotating propeller force Graph

---

## 4. 데이터 분류 체계

### 4.1 분류 기준
- **운용조건**: 운용 환경 및 조건별 분류
- **해석방법**: 포텐셜 해석, CFD 해석
- **해석조건**: 난류 모델, 경계조건 등

### 4.2 Case 관리 구조

| 항목 | 설명 |
|------|------|
| Base | 기본 설정값 |
| Default Control | Number Prism, Total Thickness |
| Surface Control | Number Prism, Total Thickness |
| Turbulent | 난류 모델 (Lag-K-E 등) |
| Viscosity | 점성 계수 |
| STAR-CCM+ ver | 해석 소프트웨어 버전 |

---

## 5. 데이터 검증 요구사항

### 5.1 EFD vs CFD 비교
- KT, 10KQ, ETAO 값의 EFD(실험) 대비 CFD(해석) 차이율(%) 계산
- 기준값 대비 오차 범위 검증

### 5.2 계산값 자동 산출
- RPS Ratio = After RPS / Forward RPS
- Reynolds Number = Density × Velocity × Diameter / Viscosity
- Velocity = J × Forward RPS × Forward Diameter

---

## 6. 기술 스택 (권장)

| 구분 | 기술 |
|------|------|
| Database | PostgreSQL |
| Backend | NextJS |
| Frontend | NextJS |
| 파일 저장 | Object Storage |

---

## 7. 부록

### 7.1 파일 형식 상세

#### Offset 파일 (.dat) 구조 예시
```
CRP_After_2009
4  1  11  0
42.063790.000  0.200  0.699  1.078
160.000158.000158.000  20.000  57.500  75.000
0.200  0.250  0.300  0.400  0.500  0.600  0.700  0.800  0.900  0.950  1.000
...
```

#### 사용단면 파일 (.blk) 구조 예시
```
Number of Total Section Profile(1999. 09. 20)
1
C= IsecT=0 ============================== 1997. 05. 00 =====C
NACA66
Comment | NACA66 Thickness+a=0.8 Meanline Camber modified T.E. at KRISO
DATA XL_G
0.0000 0.0100 0.0250 0.0500 0.1000 0.2000 0.3000 0.4000 0.4500
...
```

---

*문서 작성일: 2025-12-30*
*버전: 1.0*
